{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[26],{\"7bbf\":function(e,t,r){\"use strict\";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.ready?r(\"q-page\",{staticClass:\"doc_content\"},[r(\"ArtificialModeration\",{attrs:{AM:e.AMs.survey,alignment:\"center\",ctx:this}}),e.routed_stage?r(\"div\",[e.is_stage_completed(e.routed_stage)||e.check_data?e._e():r(\"div\",[r(\"h2\",[e._v(e._s(e.routed_stage.stage.title))]),r(\"q-banner\",{staticClass:\"bg-grey-3 q-mb-lg\",scopedSlots:e._u([{key:\"avatar\",fn:function(){return[r(\"q-icon\",{attrs:{name:\"mdi-alert-circle-outline\",color:\"primary\"}})]},proxy:!0},{key:\"action\",fn:function(){return[r(\"q-btn\",{attrs:{flat:\"\",label:e.$t(\"assemblies.go_back_to_assembly_home\")},on:{click:function(t){return e.$root.gotoAssemblyHome(this.assembly)}}})]},proxy:!0}],null,!1,2048947742)},[e._v(\"\\n        \"+e._s(e.$t(\"survey.misconfiguration_error\"))+\"\\n        \")])],1)]):e._e()],1):e._e()},s=[],i=(r(\"ac1f\"),r(\"5319\"),r(\"c937\")),o=r(\"8847\"),a={\"de-ch\":{survey:{misconfiguration_error:\"Es ist ein Fehler aufgeteten für den wir um Entschuldiung bitten. Momentan ist es nicht möglich die Befragung fortzusetzen.\",redirect_to_survey:\"Einen kleinen Moment...\",survey_completed:\"Grossartig! Sie haben diesen Fragebogen fertig ausgefüllt. Wir können nun weiterfahren.\"}}},u={created:function(){o[\"b\"].mergeLocaleMessage(\"de-ch\",a[\"de-ch\"])}},c={survey:{id:\"survey\",prosa:\" Leitet eine Text-Stage ein.\",loading:function(e){return!e.routed_stage||e.redirecting},items:[{id:1,prosa:\" Redirect zum Survey....\",condition:function(e){return!e.is_stage_completed(e.routed_stage)},body:function(e){return e.$i18n.t(\"survey.redirect_to_survey\")}},{id:2,prosa:\" Bereits Survey beendet\",condition:function(e){return e.is_stage_completed(e.routed_stage)},body:function(e){return e.$i18n.t(\"survey.survey_completed\")},buttons:[{action:function(e){e.markUnAlert(),e.gotoStage(e.next_scheduled_stage)},label:function(e){return\"Ja, bitte weiterfahren\"}}]}]}},d=c,l=r(\"836c\"),g=r(\"9651\"),_={name:\"Survey\",components:{ArtificialModeration:l[\"a\"]},mixins:[i[\"a\"],u],data:function(){return{AMs:d}},computed:{redirecting:function(){return this.routed_stage&&this.check_data&&!this.is_stage_completed(this.routed_stage)},check_data:function(){return console.log(\"check survey data..\"),void 0===this.routed_stage?null:!!(this.routed_stage.stage.custom_data&&this.routed_stage.stage.custom_data.provider&&this.routed_stage.stage.custom_data.SID)||(console.log(\"no survey data provided at this stage..\"),console.log(this.routed_stage.stage.custom_data),!1)},is_a_survey_response:function(){if(this.$route.query.completed)return this.oauth.userid==this.$route.query.U}},methods:{redirectToSurveyProvider:function(){var e=this.routed_stage.stage.custom_data.SID,t=\"https://unibe.eu.qualtrics.com/jfe/form/:SID:?DEV=1&U=:USERID:&S=:STAGEID:&A=:ASSEMBLYIDENTIFIER:\",r=/:SID:/g,n=t.replace(r,e);return r=/:USERID:/g,n=n.replace(r,this.oauth.userid),r=/:STAGEID:/g,n=n.replace(r,g[\"b\"].stageID),r=/:ASSEMBLYIDENTIFIER:/g,n=n.replace(r,g[\"b\"].assemblyIdentifier),window.location.href=n,!0}},created:function(){this.is_stage_completed(this.routed_stage)||(this.is_a_survey_response?this.markCompleted():this.redirectToSurveyProvider())}},h=_,m=r(\"2877\"),f=r(\"9989\"),p=r(\"54e1\"),y=r(\"0016\"),v=r(\"9c40\"),b=r(\"eebe\"),S=r.n(b),I=Object(m[\"a\"])(h,n,s,!1,null,null,null);t[\"default\"]=I.exports;S()(I,\"components\",{QPage:f[\"a\"],QBanner:p[\"a\"],QIcon:y[\"a\"],QBtn:v[\"a\"]})}}]);","name":"js/26.68bc4596.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[26],{\n\n/***/ \"7bbf\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/plugins/SURVEY/Index.vue?vue&type=template&id=1471bd2c&\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.ready)?_c('q-page',{staticClass:\"doc_content\"},[_c('ArtificialModeration',{attrs:{\"AM\":_vm.AMs.survey,\"alignment\":\"center\",\"ctx\":this}}),(_vm.routed_stage)?_c('div',[(!_vm.is_stage_completed(_vm.routed_stage) && !_vm.check_data)?_c('div',[_c('h2',[_vm._v(_vm._s(_vm.routed_stage.stage.title))]),_c('q-banner',{staticClass:\"bg-grey-3 q-mb-lg\",scopedSlots:_vm._u([{key:\"avatar\",fn:function(){return [_c('q-icon',{attrs:{\"name\":\"mdi-alert-circle-outline\",\"color\":\"primary\"}})]},proxy:true},{key:\"action\",fn:function(){return [_c('q-btn',{attrs:{\"flat\":\"\",\"label\":_vm.$t('assemblies.go_back_to_assembly_home')},on:{\"click\":function($event){return _vm.$root.gotoAssemblyHome(this.assembly)}}})]},proxy:true}],null,false,2048947742)},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('survey.misconfiguration_error'))+\"\\n        \")])],1):_vm._e()]):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/plugins/SURVEY/Index.vue?vue&type=template&id=1471bd2c&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js\nvar es_regexp_exec = __webpack_require__(\"ac1f\");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace.js\nvar es_string_replace = __webpack_require__(\"5319\");\n\n// EXTERNAL MODULE: ./src/mixins/stage.js\nvar stage = __webpack_require__(\"c937\");\n\n// EXTERNAL MODULE: ./src/boot/i18n.js + 3 modules\nvar i18n = __webpack_require__(\"8847\");\n\n// CONCATENATED MODULE: ./src/plugins/SURVEY/i18n.js\n\nvar messages = {\n  'de-ch': {\n    survey: {\n      misconfiguration_error: 'Es ist ein Fehler aufgeteten für den wir um Entschuldiung bitten. Momentan ist es nicht möglich die Befragung fortzusetzen.',\n      redirect_to_survey: 'Einen kleinen Moment...',\n      survey_completed: 'Grossartig! Sie haben diesen Fragebogen fertig ausgefüllt. Wir können nun weiterfahren.'\n    }\n  }\n};\n/* harmony default export */ var SURVEY_i18n = ({\n  created: function created() {\n    i18n[\"b\" /* i18n */].mergeLocaleMessage('de-ch', messages['de-ch']);\n  }\n});\n// CONCATENATED MODULE: ./src/plugins/SURVEY/ArtificialModeration.js\nvar AMs = {\n  survey: {\n    id: 'survey',\n    prosa: ' Leitet eine Text-Stage ein.',\n    loading: function loading(ctx) {\n      return !ctx.routed_stage || ctx.redirecting;\n    },\n    items: [{\n      id: 1,\n      prosa: ' Redirect zum Survey....',\n      condition: function condition(ctx) {\n        return !ctx.is_stage_completed(ctx.routed_stage);\n      },\n      body: function body(ctx) {\n        return ctx.$i18n.t(\"survey.redirect_to_survey\");\n      }\n    }, {\n      id: 2,\n      prosa: ' Bereits Survey beendet',\n      condition: function condition(ctx) {\n        return ctx.is_stage_completed(ctx.routed_stage);\n      },\n      body: function body(ctx) {\n        return ctx.$i18n.t('survey.survey_completed');\n      },\n      buttons: [{\n        action: function action(ctx) {\n          ctx.markUnAlert();\n          ctx.gotoStage(ctx.next_scheduled_stage);\n        },\n        label: function label(ctx) {\n          return 'Ja, bitte weiterfahren';\n        }\n      }]\n    }]\n  }\n};\n/* harmony default export */ var ArtificialModeration = (AMs);\n// EXTERNAL MODULE: ./src/components/artificial_moderation/ArtificialModeration.vue + 4 modules\nvar artificial_moderation_ArtificialModeration = __webpack_require__(\"836c\");\n\n// EXTERNAL MODULE: ./src/store/runtime.store.js\nvar runtime_store = __webpack_require__(\"9651\");\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/plugins/SURVEY/Index.vue?vue&type=script&lang=js&\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n/* harmony default export */ var Indexvue_type_script_lang_js_ = ({\n  name: \"Survey\",\n  components: {\n    ArtificialModeration: artificial_moderation_ArtificialModeration[\"a\" /* default */]\n  },\n  mixins: [stage[\"a\" /* default */], SURVEY_i18n],\n  data: function data() {\n    return {\n      AMs: ArtificialModeration\n    };\n  },\n  computed: {\n    redirecting: function redirecting() {\n      return this.routed_stage && this.check_data && !this.is_stage_completed(this.routed_stage);\n    },\n    check_data: function check_data() {\n      console.log(\"check survey data..\");\n\n      if (this.routed_stage === undefined) {\n        // not yet loaded...\n        return null;\n      }\n\n      if (!this.routed_stage.stage.custom_data || !this.routed_stage.stage.custom_data.provider || !this.routed_stage.stage.custom_data.SID) {\n        console.log(\"no survey data provided at this stage..\");\n        console.log(this.routed_stage.stage.custom_data);\n        return false;\n      }\n\n      return true;\n    },\n    is_a_survey_response: function is_a_survey_response() {\n      if (!this.$route.query.completed) {\n        return;\n      }\n\n      if (this.oauth.userid != this.$route.query.U) {\n        return false;\n      }\n\n      return true;\n    }\n  },\n  methods: {\n    redirectToSurveyProvider: function redirectToSurveyProvider() {\n      // all data available\n      var SID = this.routed_stage.stage.custom_data.SID; // this.$router.currentRoute.path\n\n      var url = \"https://unibe.eu.qualtrics.com/jfe/form/:SID:?DEV=1&U=:USERID:&S=:STAGEID:&A=:ASSEMBLYIDENTIFIER:\";\n      var re = /:SID:/g;\n      var newurl = url.replace(re, SID);\n      re = /:USERID:/g;\n      newurl = newurl.replace(re, this.oauth.userid);\n      re = /:STAGEID:/g;\n      newurl = newurl.replace(re, runtime_store[\"b\" /* runtimeStore */].stageID);\n      re = /:ASSEMBLYIDENTIFIER:/g;\n      newurl = newurl.replace(re, runtime_store[\"b\" /* runtimeStore */].assemblyIdentifier);\n      window.location.href = newurl;\n      return true;\n    }\n  },\n  created: function created() {\n    // Completed Response?\n    if (!this.is_stage_completed(this.routed_stage)) {\n      if (this.is_a_survey_response) {\n        this.markCompleted();\n      } else {\n        this.redirectToSurveyProvider();\n      }\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/plugins/SURVEY/Index.vue?vue&type=script&lang=js&\n /* harmony default export */ var SURVEY_Indexvue_type_script_lang_js_ = (Indexvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(\"2877\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/page/QPage.js\nvar QPage = __webpack_require__(\"9989\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/banner/QBanner.js\nvar QBanner = __webpack_require__(\"54e1\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/icon/QIcon.js\nvar QIcon = __webpack_require__(\"0016\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn/QBtn.js\nvar QBtn = __webpack_require__(\"9c40\");\n\n// EXTERNAL MODULE: ./node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\nvar runtime_auto_import = __webpack_require__(\"eebe\");\nvar runtime_auto_import_default = /*#__PURE__*/__webpack_require__.n(runtime_auto_import);\n\n// CONCATENATED MODULE: ./src/plugins/SURVEY/Index.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  SURVEY_Indexvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var Index = __webpack_exports__[\"default\"] = (component.exports);\n\n\n\n\n\nruntime_auto_import_default()(component, 'components', {QPage: QPage[\"a\" /* default */],QBanner: QBanner[\"a\" /* default */],QIcon: QIcon[\"a\" /* default */],QBtn: QBtn[\"a\" /* default */]});\n\n\n/***/ })\n\n}]);","inputSourceMap":null}